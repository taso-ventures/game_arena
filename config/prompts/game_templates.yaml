# Unified game prompt templates that are equivalent across all models
# These templates focus on entertaining strategies while providing sufficient
# context for long-term reasoning and memory access.

# Core template structure used across all games (neutral, no emojis)
base_template: |
  GAME ANALYSIS & STRATEGY - Turn {turn}
  ==========================================

  VICTORY OBJECTIVE: {victory_type} ({victory_progress}% complete)
  CURRENT POSITION: {position} (Score: {score})

  MEMORY CONTEXT:
  {memory_context}

  LONG-TERM STRATEGY:
  {long_term_strategy}

  {game_specific_content}

  AVAILABLE ACTIONS:
  {prioritized_actions}

  REASONING FRAMEWORK:
  1. Analyze current position and strategic situation
  2. Evaluate potential moves and their consequences
  3. Consider long-term strategic implications
  4. Choose optimal action based on analysis

  FORMAT YOUR RESPONSE: {response_format}

# Game-specific content templates
games:
  freeciv:
    early_game: |
      FREECIV EARLY GAME PRIORITIES (Entertainment Focus):
      ‚Ä¢ Explore with flair - seek dramatic terrain and strategic positions
      ‚Ä¢ Establish cities in bold locations that tell a story
      ‚Ä¢ Build infrastructure that supports an entertaining civilization
      ‚Ä¢ Defend against barbarians with clever tactics

      {strategic_summary}

      EXPLORATION STRATEGY:
      Create a narrative through your civilization's expansion. Each move
      should contribute to an epic story of growth and discovery.

      ENTERTAINMENT DIRECTIVE:
      Focus on dramatic, bold moves that create interesting gameplay moments.
      Consider unexpected strategies that surprise opponents while maintaining
      strategic advantage. Balance risk and reward for maximum engagement.

    mid_game: |
      FREECIV MID GAME EXPANSION (Entertainment Focus):
      ‚Ä¢ Execute bold military campaigns with tactical brilliance
      ‚Ä¢ Engage in diplomacy that creates interesting alliances/rivalries
      ‚Ä¢ Develop technologies that enable spectacular strategies
      ‚Ä¢ Build wonders that showcase your civilization's uniqueness

      {strategic_summary}

      MILITARY DOCTRINE:
      Lead armies with creativity and panache. Every battle should be
      memorable, combining sound strategy with dramatic execution.

      ENTERTAINMENT DIRECTIVE:
      Focus on dramatic, bold moves that create interesting gameplay moments.
      Consider unexpected strategies that surprise opponents while maintaining
      strategic advantage. Balance risk and reward for maximum engagement.

    late_game: |
      FREECIV LATE GAME DOMINANCE (Entertainment Focus):
      ‚Ä¢ Push for victory with spectacular final strategies
      ‚Ä¢ Execute endgame plans that showcase strategic mastery
      ‚Ä¢ Create climactic moments that define your civilization's legacy
      ‚Ä¢ Balance multiple victory paths for maximum strategic options

      {strategic_summary}

      VICTORY PURSUIT:
      Make your final moves legendary. The path to victory should be
      as entertaining as the destination itself.

      ENTERTAINMENT DIRECTIVE:
      Focus on dramatic, bold moves that create interesting gameplay moments.
      Consider unexpected strategies that surprise opponents while maintaining
      strategic advantage. Balance risk and reward for maximum engagement.

  # Note: Chess and Go continue to use the original PromptGeneratorText system
  # from prompt_generation.py. Only FreeCiv uses this new enhanced system.

# Memory context templates for different game phases
memory_contexts:
  exploration_phase: |
    Recent discoveries and their strategic implications. Notable encounters
    with other civilizations or barbarians. Key terrain features that will
    influence long-term city placement and expansion routes.

  development_phase: |
    Infrastructure priorities and their entertainment value. Technology
    research decisions and their strategic rationale. City specialization
    plans that create interesting gameplay dynamics.

  conflict_phase: |
    Military engagements and their outcomes. Diplomatic relationships and
    their evolution. Strategic pivots made in response to changing conditions.

  endgame_phase: |
    Victory condition pursuit strategies. Critical decisions that shaped
    the civilization's destiny. Lessons learned that inform final moves.

# Long-term strategy templates
strategy_frameworks:
  balanced_growth: |
    Pursue steady expansion while maintaining strong defenses. Balance
    economic development with military readiness. Create a resilient
    civilization capable of adapting to changing circumstances.

  aggressive_expansion: |
    Execute bold territorial grabs and rapid expansion. Maintain forward
    momentum through decisive action. Risk management through calculated
    aggression and strategic positioning.

  cultural_dominance: |
    Build an inspiring civilization that influences others through example.
    Focus on unique developments that showcase strategic creativity.
    Win hearts and minds through spectacular achievements.

  technological_supremacy: |
    Race ahead in key technologies that enable strategic advantages.
    Create technological synergies that compound strategic benefits.
    Use innovation to overcome resource and positional disadvantages.

# Response format templates for different models
response_formats:
  structured: |
    Provide your analysis in clear sections with headers and numbered points.

    ACTION FORMAT REQUIREMENT:
    ‚ö° RECOMMENDED: Submit MULTIPLE actions in one response to maximize efficiency and reduce delays.
    This allows you to plan ahead and execute a sequence of strategic moves in a single turn.

    MULTI-ACTION FORMAT (EITHER FORM IS ACCEPTED):
    Option A - JSON Array (copy structure, adjust values):
    [
      {"type":"unit_build_city","unit_id":102},
      {"type":"unit_move","unit_id":109,"dest_x":31,"dest_y":52},
      {"type":"unit_move","unit_id":110,"dest_x":14,"dest_y":30},
      {"type":"end_turn"}
    ]

    Option B - Canonical List (plain text alternative):
    unit_build_city(102)
    unit_move(109)_to(31,52)
    unit_move(110)_to(14,30)
    end_turn()

    üìã JSON SCHEMA (if using JSON format):
    {
      "unit_move": {
        "type": "unit_move",
        "unit_id": <integer>,
        "dest_x": <integer>,
        "dest_y": <integer>
      },
      "unit_build_city": {
        "type": "unit_build_city",
        "unit_id": <integer>
      },
      "city_production": {
        "type": "city_production",
        "city_id": <integer>,
        "production_type": <string>  // REQUIRED: e.g., "warrior", "granary", "settlers"
      },
      "tech_research": {
        "type": "tech_research",
        "tech_name": <string>  // REQUIRED: e.g., "Pottery", "Writing", "Bronze Working"
      },
      "end_turn": {
        "type": "end_turn"
      }
    }

    ‚ö†Ô∏è CRITICAL JSON RULES:
    1. ONLY use action types that EXACTLY match entries in AVAILABLE ACTIONS
    2. Do NOT invent action types like "explore_nearby_areas" or "build_first_city"
    3. For city_production: MUST include "production_type" field with what to produce
    4. For tech_research: MUST include "tech_name" field with technology name
    5. Copy unit_id, city_id, dest_x, dest_y exactly from AVAILABLE ACTIONS
    6. If using JSON array, ensure proper format: [{"type":"..."},{"type":"..."}]

    Benefits of multi-action responses:
    - Faster gameplay (reduces round-trip delays)
    - Better strategic planning (coordinate multiple units/cities)
    - More efficient turn execution
    - You can include "end_turn()" to signal completion

    SINGLE-ACTION FORMAT (fallback if only one action needed):
    1. Canonical format (PREFERRED): unit_move(101)_to(2,3)
    2. JSON format: {"type":"unit_move","unit_id":101,"dest_x":2,"dest_y":3}

    ‚ö†Ô∏è IMPORTANT: Every action you provide MUST exactly match an entry in AVAILABLE ACTIONS.

    End with: FINAL DECISION: [your actions in format above] because [strategic reasoning]

    EXAMPLE (Multi-Action - Canonical):
    FINAL DECISION:
    unit_build_city(103)
    unit_build_city(104)
    unit_move(105)_to(53,29)
    end_turn()
    because founding two cities rapidly expands our territory while moving the worker to improve tiles, then ending turn to secure our gains.

    EXAMPLE (Multi-Action - JSON):
    FINAL DECISION:
    [
      {"type":"unit_build_city","unit_id":103},
      {"type":"unit_build_city","unit_id":104},
      {"type":"unit_move","unit_id":105,"dest_x":53,"dest_y":29},
      {"type":"end_turn"}
    ]
    because founding two cities rapidly expands our territory while moving the worker to improve tiles, then ending turn to secure our gains.

    Dynamic note: End-turn guidance will appear in AVAILABLE ACTIONS only when appropriate.

  conversational: |
    Share your strategic thinking in a natural, engaging way. Explain your
    reasoning as if discussing strategy with a fellow player.

    ACTION FORMAT REQUIREMENT:
    When stating your action choice, use these simple formats:
    - Canonical (PREFERRED): unit_move(101)_to(2,3) or tech_research(Pottery) or end_turn()
    - JSON alternative: {"type":"unit_move","unit_id":101,"dest_x":2,"dest_y":3}

    Conclude with your chosen action in the exact format and explain why it's both smart and entertaining.

    EXAMPLE (Canonical - PREFERRED):
    "I'm going with tech_research(Pottery) because it opens up granaries for population growth!"

    EXAMPLE (JSON alternative):
    "I'm choosing {"type":"tech_research","tech_name":"Pottery"} to unlock granaries!"

    Dynamic note: End-turn guidance appears only when it's strategically time to end the turn.

  concise: |
    Present key analysis points efficiently. Focus on critical factors and
    decisive reasoning.

    ACTION FORMAT: 
    Use canonical format (PREFERRED): unit_move(101)_to(2,3) or city_production(5)_target(Warrior)
    Or JSON: {"type":"city_production","city_id":5,"target":"Warrior"}

    EXAMPLE (Canonical - PREFERRED):
    Analysis: Need military. Choice: city_production(5)_target(Warrior) - strengthens defense.
    
    Dynamic note: End-turn suggestion shown only when no meaningful actions remain.
